# Ch1. The Goal of Unit Testing

## 테스트를 잘하면?
- 성장하기 쉬워진다  
- 유지보수에 들이는 노력을 줄일 수 있다  
- 요구사항을 반영하는 빠른 변화를 만들어낼 수 있다  


## 유닛 테스트의 현황
> 테스트의 필요성은 이미 합의되었다.

중요한 것은  
1. **What is good?**  
2. **How makes it good?**  


## 유닛 테스트의 목표
- 유닛 테스트 → 더 나은 설계를 가져오는 부가 효과  
- 테스트 가능 여부로 품질 낮은 코드를 필터링  
- **소프트웨어의 성장을 지속 가능하게 만들어준다.**  
- 소프트웨어의 안전망이 되어준다.  


## 좋은 테스트는?
모든 테스트가 똑같이 가치 있는 것은 아니다.  
테스트의 가치와 유지 비용을 모두 고려해야 한다.  
> “코드는 곧 부채(빚)이다.”

### 유지 비용에 포함되는 시간
1. 기본 코드를 리팩터링할 때 테스트도 함께 리팩터링하는 시간  
2. 코드가 변경될 때마다 테스트를 실행하는 시간  
3. 테스트가 발생시키는 허위 경고를 처리하는 시간  
4. 테스트를 읽으며 기본 코드의 동작을 이해하려고 애쓰는 시간  


## 나쁜 테스트 코드를 판단하는 4가지 요소
1. 리팩터링 시 **자주 깨지는 테스트**  
2. 자주 발생하는 **허위 경고**  
3. **느린** 테스트 실행 속도  
4. **읽기 어려운** 테스트 코드  


## Coverage Metrics
- 코드 커버리지(code coverage)  
- 분기 커버리지(branch coverage)  

> 특정 커버리지 퍼센트를 목표로 삼지 말고, **지표(indicator)** 로 활용하자.  
> - 60% 이하면, 테스트되지 않는 production code가 많다는 의미  
> - 100% 라도 좋은 테스트를 작성했다고 보장하지는 않는다  


## 성공적인 Test Suite의 조건
1. **테스트 코드가 개발 주기에 통합**되어 있다.  
   - Production Code가 바뀔 때마다 Test가 실행되어야 한다.  
2. **코드에서 가장 중요한 부분(대부분 Domain part)만**을 대상으로 한다.  
   - 이를 위해 관심사 분리(Separation of Concerns)가 필요하다.  
3. **최소한의 유지 비용으로 최대한의 가치를 제공**한다.  
   - 개발자는 가치 있는 테스트를 알아보고 작성하는 능력을 갖춰야 한다.  
   - → 테스트 작성 능력을 키우려면 **코드 설계에 대한 지식**도 필요하다.  
